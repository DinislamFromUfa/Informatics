@model WebApplication1.Models.Course

@{
    ViewData["Title"] = "Редактирование деталей курса";
}

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #f4f4f4;
    }

    h2 {
        color: #333;
    }

    .form-group {
        margin-bottom: 20px;
    }

    label {
        display: block;
        margin-bottom: 5px;
    }

    .form-control {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
    }

    .text-danger {
        color: red;
    }

    h3 {
        color: #333;
        margin-top: 20px;
    }

    .table {
        width: 100%;
        border-collapse: collapse;
    }

        .table th, .table td {
            padding: 10px;
            border: 1px solid #ccc;
            text-align: left;
        }

        .table th {
            background-color: #f0f0f0;
        }

    a {
        text-decoration: none;
        color: #007bff;
    }

        a:hover {
            text-decoration: underline;
        }

    button {
        padding: 10px 15px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

        button:hover {
            background-color: #0069d9;
        }
</style>

<h2>Редактирование деталей курса: @Model.CourseName</h2>

<form asp-controller="Courses" asp-action="UpdateDetails" asp-route-id="@Model.Id" method="post">
    <input type="hidden" asp-for="Id" />

    <div class="form-group">
        <label asp-for="CourseName">Название курса:</label>
        <input asp-for="CourseName" class="form-control" />
        <span asp-validation-for="CourseName" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="Description">Описание курса:</label>
        <textarea asp-for="Description" class="form-control"></textarea>
        <span asp-validation-for="Description" class="text-danger"></span>
    </div>

    <h4>Уроки</h4>
    <table class="table">
        <tbody>
            @foreach (var lesson in Model.Lessons)
            {
                if (lesson == null)
                {
                    <p>Уроков пока нет</p>
                }
                else
                {
                    <h3>@lesson.Name</h3>
                    @foreach (var file in lesson.ContentFiles)
                    {
                        <div>
                            <a href="@Url.Action("DownloadFile", "Lesson", new { filePath = file })">Скачать @file</a>
                        </div>
                    }
                    <div>
                        <a href="@Url.Action("UpdateLesson", "Lesson", new { lessonId = lesson.Id })">
                            Редактировать урок
                        </a>
                        <a href="@Url.Action("DeleteLesson", "Lesson", new { lessonId = lesson.Id })">
                            Удалить урок
                        </a>
                    </div>
                }
            }
        </tbody>
    </table>

    <a asp-controller="Lesson" asp-action="CreateNewLesson" asp-route-courseId="@Model.Id">Добавить новый урок</a>
    <button type="submit" class="btn btn-primary">Сохранить изменения</button>
</form>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}